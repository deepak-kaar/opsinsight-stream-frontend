<div class="pt-[50px] pl-[20px] pr-[20px] w-full">
  <div>
    <app-filter></app-filter>
  </div>
  <div class="pt-[50px] w-full">
    <p-card class="w-full">
      <div class="card">
        <p-table #dt [value]="correlationData" selectionMode="single" [(selection)]="selectedCorrelation"
          dataKey="correlationId" [rowHover]="true" [rows]="3" [showCurrentPageReport]="true"
          [rowsPerPageOptions]="[3, 5, 10]" [loading]="loading" [paginator]="true"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [filterDelay]="0"
          (onRowSelect)="onCorrelationSelect($event)" (onRowUnselect)="onCorrelationUnSelect($event)"
          [globalFilterFields]="[
            'name',
            'country.name',
            'representative.name',
            'status'
          ]">
          <ng-template #caption>
            <div class="flex justify-between">
              <div>List of Correlation templates</div>
              <div class="flex gap-[10px]">
                <p-button [outlined]="true" icon="pi pi-filter-slash" (click)="clear(dt)" />
                <p-iconField iconPosition="left">
                  <p-inputIcon>
                    <i class="pi pi-search"></i>
                  </p-inputIcon>
                  <input pInputText type="text" [(ngModel)]="searchValue" placeholder="Search" />
                </p-iconField>
                <p-button (onClick)="createApp()">Create New Correlation</p-button>
              </div>
            </div>
          </ng-template>
          <ng-template #header>
            <tr>
              <th pSortableColumn="correlationName" style="min-width: 14rem">
                <div class="flex justify-between items-center">
                  Correlation Template Name
                  <p-sortIcon field="correlationName" />
                </div>
              </th>
              <th pSortableColumn="correlationDesc" style="min-width: 14rem">
                <div class="flex justify-between items-center">
                  Template Description
                  <p-sortIcon field="correlationDesc" />
                </div>
              </th>

              <th pSortableColumn="correlationStatus">
                <div class="flex justify-between items-center">
                  Status
                  <p-sortIcon field="correlationStatus" />
                </div>
              </th>

              <th pSortableColumn="createdOn" style="min-width: 10rem">
                <div class="flex justify-between items-center">
                  Date
                  <p-sortIcon field="createdOn" />
                </div>
              </th>

              <th style="width: 5rem">
                <div class="flex justify-between items-center">
                  Action
                  <p-sortIcon field="date" />
                </div>
              </th>
            </tr>
          </ng-template>
          <ng-template #body let-cor>
            <tr [pSelectableRow]="cor">
              <td>
                {{ cor.correlationName }}
              </td>
              <td>
                {{ cor.correlationDesc }}
              </td>
              <td>
                <p-tag [value]="getStatus(cor.correlationStatus)" [severity]="getSeverity(cor.correlationStatus)" />
              </td>
              <td>
                {{ cor.createdOn | date : "MM/dd/yyyy" }}
              </td>
              <td class="flex gap-[5px]">
                <p-button icon="pi pi-trash" severity="danger" [rounded]="true" [outlined]="true"
                  (click)="deleteApp($event, cor.correlationId)" />
              </td>
            </tr>
          </ng-template>

          <ng-template #emptymessage>
            <tr>
              <td colspan="8">No Correlation Templates found.</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </p-card>
  </div>

</div>
<p-confirmdialog></p-confirmdialog>
<p-toast [breakpoints]="breakPointForToastComponent"></p-toast>