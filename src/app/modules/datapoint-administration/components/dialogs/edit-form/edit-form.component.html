@if(isShowUi) {
<div>
    <div class="">
        <div class="form flex flex-col gap-3">
            <form [formGroup]="form">
                @for(field of fields;track field){
                @if(field.dataPointID.dataType === 'String' && field.isLookup){
                <div class="flex flex-col gap-2 pt-2">
                    <label for="username">{{field.attributeName}}
                        @if(field.isNull){
                        <span class="text-red-500">*</span>
                        }
                    </label>
                    <p-select appendTo="body" [options]="field.attrList" [style]="{'width':'100%'}"
                        placeholder="Choose {{ field.attributeName}}" formControlName="{{field.attributeName}}" />
                </div>
                }
                @else if(field.dataPointID.dataType === 'String' || field.dataPointID.dataType === 'Character' ||
                field.dataPointID.dataType ==='Decimal' || field.dataPointID.dataType ==='Double' ||
                field.dataPointID.dataType === 'Float' ) {
                <div class="flex flex-col gap-2 pt-2">
                    <label for="username">{{field.attributeName}}
                        @if(field.isNull){
                        <span class="text-red-500">*</span>
                        }
                    </label>
                    <input pInputText id="username" placeholder="Enter {{ field.attributeName}}"
                        aria-describedby="username-help" formControlName="{{field.attributeName}}" />
                </div>
                }
                @else if(field.dataPointID.dataType === 'Text' ){
                <div class="flex flex-col gap-2 pt-2">
                    <label for="username">{{field.attributeName}}
                        @if(field.isNull){
                        <span class="text-red-500">*</span>
                        }
                    </label>
                    <textarea rows="5" cols="30" pInputTextarea placeholder="Enter {{ field.attributeName}}"
                        formControlName="{{field.attributeName}}">
                            </textarea>
                </div>
                }
                @else if(field.dataPointID.dataType === 'Array') {

                }
                @else if(field.dataPointID.dataType === 'Double'){
                <div class="flex flex-col gap-2 pt-2">
                    <label for="username">{{field.attributeName}}@if(field.isNull){
                        <span class="text-red-500">*</span>
                        }</label>
                    <input pInputText id="username" placeholder="Enter {{ field.attributeName}}"
                        aria-describedby="username-help" formControlName="{{field.attributeName}}" />
                </div>
                }
                @else if(field.dataPointID.dataType === 'Date'){
                <div class="flex flex-col gap-2 pt-2">
                    <label for="username">{{field.attributeName}}
                        @if(field.isNull){
                        <span class="text-red-500">*</span>
                        }
                    </label>
                    <p-calendar appendTo="body" [style]="{'width':'100%'}" formControlName="{{field.attributeName}}"
                        placeholder="Enter {{ field.attributeName}}" [iconDisplay]="'input'" [showIcon]="true"
                        inputId="icondisplay" />
                </div>
                }
                @else if(field.dataPointID.dataType === 'Binary'){
                <div class="flex flex-col gap-2 pt-2">
                    <label for="username">{{field.attributeName}}
                        @if(field.isNull){
                        <span class="text-red-500">*</span>
                        }
                    </label>
                    <p-toast />
                    <p-fileUpload name="demo[]" url="https://www.primefaces.org/cdn/api/upload.php"
                        (onUpload)="onUpload($event)" [multiple]="true" accept="image/*" maxFileSize="1000000">
                        <ng-template pTemplate="content">
                            <ul *ngIf="uploadedFiles.length">
                                <li *ngFor="let file of uploadedFiles">
                                    {{ file.name }} - {{ file.size }} bytes
                                </li>
                            </ul>
                        </ng-template>
                    </p-fileUpload>
                </div>
                }
                }
            </form>
            <div class="pt-2">
                <p-button [style]="{'width':'100%'}" label="Update" (onClick)="submit()" [raised]="true"
                    severity="success" />
            </div>
        </div>
        @if(mode === 'edit'){
        <div class="pt-5">
            <p-table #dt [value]="logs" dataKey="id" [rowHover]="true" [rows]="5" [showCurrentPageReport]="true"
                [rowsPerPageOptions]="[5,10,50]" [paginator]="true"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [filterDelay]="0"
                [globalFilterFields]="['name', 'country.name', 'representative.name', 'status']">
                <ng-template pTemplate="caption">
                    <div class="flex justify-content-between">
                        <p-button [outlined]="true" icon="pi pi-filter-slash" label="Clear" (onClick)="clear(dt)" />
                        <p-iconField iconPosition="left">
                            <p-inputIcon>
                                <i class="pi pi-search"></i>
                            </p-inputIcon>
                            <input pInputText type="text" placeholder="Keyboard Search" />
                        </p-iconField>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="performedBy" style="min-width: 14rem">
                            <div class="flex justify-content-between align-items-center">
                                Updated By
                                <p-sortIcon field="performedBy" />
                                <p-columnFilter type="text" field="performedBy" display="menu" class="ml-auto" />
                            </div>
                        </th>
                        <th pSortableColumn="timestamp" style="min-width: 14rem">
                            <div class="flex justify-content-between align-items-center">
                                Updated On
                                <p-sortIcon field="timestamp" />
                                <p-columnFilter type="text" field="timestamp" display="menu" class="ml-auto" />
                            </div>
                        </th>
                        <th pSortableColumn="Operation" style="min-width: 14rem">
                            <div class="flex justify-content-between align-items-center">
                                Mode of Operation
                                <p-sortIcon field="operation" />
                                <p-columnFilter type="text" field="operation" display="menu" class="ml-auto" />
                            </div>
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-app>
                    <tr class="p-selectable-row">
                        <td>
                            <span class="p-column-title">Updated By</span>
                            <img [alt]="app.performedBy"
                                src="https://primefaces.org/cdn/primeng/images/demo/avatar/ivanmagalhaes.png" width="32"
                                style="vertical-align: middle" />
                            <span class="ml-1 vertical-align-middle">{{ app.performedBy }}</span>
                        </td>
                        <td>
                            <span class="p-column-title">Updated On</span>
                            {{ app.timestamp| date : 'short' }}
                        </td>
                        <td>
                            <span class="p-column-title">Updated On</span>
                            {{ app.operation}}
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="8">No change History Found</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
        }

    </div>
</div>
}