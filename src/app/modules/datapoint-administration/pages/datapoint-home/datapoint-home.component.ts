import { Component } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import { Router } from '@angular/router';
import { Observable } from 'rxjs';
import { ResponsiveService } from 'src/app/core/utils/responsive.service';
import { Apps, Orgs } from 'src/app/modules/page-administrator/interfaces/page-administrator';

@Component({
  selector: 'app-datapoint-home',
  standalone: false,
  templateUrl: './datapoint-home.component.html',
  styleUrl: './datapoint-home.component.css'
})
export class DatapointHomeComponent {
  cardList = [{
    name: 'Entity/Schema',
    svg: `<svg width="45" height="45" viewBox="0 0 50 51" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle opacity="0.07" cx="25" cy="25.5" r="25" fill="var(--p-surface-300)" />
          <path d="M33.1198 18.8952C33.1198 17.2978 29.4925 16 25 16C20.5075 16 16.8802 17.2978 16.8802 18.8952V19.8935C16.8802 21.4908 20.5075 22.7887 25 22.7887C29.4925 22.7887 33.1198 21.4908 33.1198 19.8935V18.8952ZM16.8802 22.223C16.8802 23.4875 20.5075 24.4859 25 24.4859C29.4925 24.4859 33.1198 23.4875 33.1198 22.223V24.2862C33.1198 25.8835 29.4925 27.1814 25 27.1814C20.5075 27.1814 16.8802 25.8835 16.8802 24.2862V22.223ZM16.8802 22.223C16.8802 23.4875 20.5075 24.4859 25 24.4859C29.4925 24.4859 33.1198 23.4875 33.1198 22.223V24.2862C33.1198 25.8835 29.4925 27.1814 25 27.1814C20.5075 27.1814 16.8802 25.8835 16.8802 24.2862V22.223ZM16.8802 26.6156C16.8802 27.8802 20.5075 28.8785 25 28.8785C29.4925 28.8785 33.1198 27.8802 33.1198 26.6156V28.6456C33.1198 30.2429 29.4925 31.5408 25 31.5408C20.5075 31.5408 16.8802 30.2762 16.8802 28.7121C16.8802 28.7121 16.8802 26.6156 16.8802 26.6156ZM16.8802 31.0416C16.8802 32.3062 20.5408 33.3045 25 33.3045C29.4592 33.3045 33.1198 32.3062 33.1198 31.0416V33.1048C33.1198 34.7022 29.4925 36 25 36C20.5075 36 16.8802 34.7022 16.8802 33.1048V31.0416Z"
          fill="var(--p-primary-color)" />
          </svg>`
  },
  {
    name: 'Instances',
    svg: `<svg width="45" height="45" viewBox="0 0 50 51" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle opacity="0.07" cx="25" cy="25.5" r="25" fill="var(--p-surface-300)" />
          <path d="M23.0025 16.825L24.7475 16L33.5 20.1425V31.8575L24.7475 36L23.0025 35.175V16.825ZM21.475 17.5475L20.125 18.1875V33.815L21.475 34.4525V17.5475ZM17.845 19.265L18.9237 18.7575V33.2425L17.845 32.735V19.265ZM16.875 19.725V32.275L16 31.86V20.14L16.875 19.7275V19.725Z"
           fill="var(--p-primary-color)" />
          </svg>`
  },
  {
    name: 'Tags',
    svg: `<svg width="45" height="45" viewBox="0 0 50 51" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle opacity="0.07" cx="25" cy="25.5" r="25" fill="var(--p-surface-300)" />
          <path
          d="M36.3849 19.0841L33.5531 16.2522C33.3916 16.0907 33.1726 16 32.9443 16H32.6353V20.0657H36.6371V19.6929C36.6371 19.4646 36.5464 19.2456 36.3849 19.0841Z"
          fill="var(--p-primary-color)" />
          <path
          d="M24.9134 26.5264V18.5185C24.9134 18.4394 24.8491 18.375 24.77 18.375H24.3108C24.2317 18.375 24.1673 18.4394 24.1673 18.5185V26.5264C24.1673 26.8362 23.9709 27.1002 23.6958 27.2006L24.5404 28.6634L25.3849 27.2006C25.1098 27.1002 24.9134 26.8362 24.9134 26.5264Z"
          fill="var(--p-primary-color)" />
          <path
          d="M31.9179 20.4245V16H17.4982C17.0246 16 16.6372 16.3874 16.6372 16.861V30.4772C16.6372 30.9507 17.0246 31.3382 17.4982 31.3382H28.2644V31.1065C28.2644 30.5288 28.6393 30.0371 29.1586 29.8619C29.0602 29.6756 29.008 29.4668 29.008 29.2501C29.008 28.8993 29.1446 28.5696 29.3926 28.3216L29.7578 27.9564C30.0058 27.7083 30.3355 27.5718 30.6862 27.5718C30.8984 27.5718 31.1029 27.6218 31.2863 27.7162C31.3038 27.7087 31.3214 27.7013 31.339 27.694C31.5122 27.1711 32.0057 26.7929 32.5858 26.7929H33.1024C33.6825 26.7929 34.1759 27.1711 34.3491 27.6939C34.3568 27.6971 34.3645 27.7003 34.3722 27.7035C34.5458 27.621 34.7371 27.5774 34.9352 27.5774C35.2859 27.5774 35.6156 27.714 35.8636 27.962L36.2288 28.3273C36.4768 28.5753 36.6134 28.905 36.6134 29.2557C36.6134 29.4559 36.5689 29.6492 36.4846 29.8244C36.4921 29.8424 36.4995 29.8604 36.5067 29.8785C36.5514 29.8955 36.595 29.915 36.6372 29.9366V20.7832H32.2766C32.0793 20.7832 31.9179 20.6218 31.9179 20.4245ZM26.9959 20.0657H28.8595C29.0568 20.0657 29.2182 20.2272 29.2182 20.4245C29.2182 20.6218 29.0568 20.7832 28.8595 20.7832H26.9959C26.7986 20.7832 26.6372 20.6218 26.6372 20.4245C26.6372 20.2272 26.7986 20.0657 26.9959 20.0657ZM26.9959 21.6346H30.1222C30.3195 21.6346 30.4809 21.7961 30.4809 21.9934C30.4809 22.1907 30.3195 22.3521 30.1222 22.3521H26.9959C26.7986 22.3521 26.6372 22.1907 26.6372 21.9934C26.6372 21.7961 26.7986 21.6346 26.9959 21.6346ZM26.6372 23.5623C26.6372 23.365 26.7986 23.2035 26.9959 23.2035H31.5284C31.7257 23.2035 31.8871 23.365 31.8871 23.5623C31.8871 23.7596 31.7257 23.921 31.5284 23.921H26.9959C26.7986 23.921 26.6372 23.7596 26.6372 23.5623ZM20.1115 20.0657H21.975C22.1723 20.0657 22.3337 20.2272 22.3337 20.4245C22.3337 20.6218 22.1723 20.7832 21.975 20.7832H20.1115C19.9142 20.7832 19.7527 20.6218 19.7527 20.4245C19.7527 20.2272 19.9142 20.0657 20.1115 20.0657ZM21.8715 25.4899H20.1115C19.9142 25.4899 19.7527 25.3285 19.7527 25.1312C19.7527 24.9339 19.9142 24.7724 20.1115 24.7724H21.8715C22.0688 24.7724 22.2303 24.9339 22.2303 25.1312C22.2303 25.3285 22.0688 25.4899 21.8715 25.4899ZM22.2303 23.5623C22.2303 23.7596 22.0688 23.921 21.8715 23.921H20.1115C19.9142 23.921 19.7527 23.7596 19.7527 23.5623C19.7527 23.365 19.9142 23.2035 20.1115 23.2035H21.8715C22.0688 23.2035 22.2303 23.365 22.2303 23.5623ZM22.019 22.3521H20.1115C19.9142 22.3521 19.7528 22.1907 19.7528 21.9934C19.7528 21.7961 19.9142 21.6346 20.1115 21.6346H22.019C22.2163 21.6346 22.3777 21.7961 22.3777 21.9934C22.3777 22.1907 22.2163 22.3521 22.019 22.3521ZM26.2395 27.156L25.5715 28.3132L24.9034 29.4703C24.7421 29.7498 24.3386 29.7498 24.1773 29.4703L23.5092 28.3132L22.8412 27.156C22.6798 26.8765 22.8815 26.5271 23.2043 26.5271H23.4498V18.5193C23.4498 18.0438 23.8352 17.6583 24.3108 17.6583H24.7699C25.2454 17.6583 25.6309 18.0438 25.6309 18.5193V26.5271H25.8764C26.1992 26.5271 26.4009 26.8765 26.2395 27.156ZM33.5216 25.1312C33.5216 25.3285 33.3602 25.4899 33.1629 25.4899H26.9959C26.7986 25.4899 26.6372 25.3285 26.6372 25.1312C26.6372 24.9339 26.7986 24.7724 26.9959 24.7724H33.1629C33.3602 24.7724 33.5216 24.9339 33.5216 25.1312Z"
          fill="var(--p-primary-color)" />
          <path
          d="M36.0417 30.5103C36.0149 30.5103 35.9887 30.5127 35.9629 30.5161C35.8907 30.2413 35.7832 29.9807 35.6455 29.7397C35.672 29.7207 35.6977 29.7 35.7215 29.6762C35.954 29.4436 35.954 29.0666 35.7215 28.834L35.3562 28.4687C35.1237 28.2361 34.7466 28.2361 34.514 28.4687C34.491 28.4917 34.4709 28.5165 34.4525 28.5421C34.2145 28.4048 33.9572 28.2973 33.6859 28.2241C33.6937 28.1857 33.6978 28.146 33.6978 28.1053C33.6978 27.7764 33.4312 27.5098 33.1023 27.5098H32.5857C32.2569 27.5098 31.9902 27.7764 31.9902 28.1053C31.9902 28.146 31.9944 28.1857 32.0022 28.2241C31.7136 28.302 31.4412 28.4187 31.1907 28.5686C31.1673 28.5312 31.1398 28.4956 31.1073 28.4631C30.8747 28.2305 30.4976 28.2305 30.2651 28.4631L29.8998 28.8284C29.6673 29.0609 29.6673 29.438 29.8998 29.6706C29.9386 29.7094 29.9818 29.7412 30.0273 29.767C29.8949 30.0041 29.7913 30.2596 29.7217 30.5287C29.6754 30.5172 29.6272 30.5103 29.5773 30.5103C29.2484 30.5103 28.9818 30.7769 28.9818 31.1058V31.6224C28.9818 31.9513 29.2484 32.218 29.5773 32.218C29.6321 32.218 29.6848 32.2099 29.7352 32.1961C29.8091 32.4643 29.9166 32.7184 30.0532 32.9537C30.0141 32.9777 29.9769 33.006 29.943 33.0398C29.7105 33.2724 29.7105 33.6495 29.943 33.882L30.3083 34.2473C30.5409 34.4799 30.9179 34.4798 31.1505 34.2473C31.1851 34.2127 31.2139 34.1746 31.2382 34.1346C31.4755 34.2711 31.7318 34.3781 32.0022 34.451C31.9944 34.4894 31.9902 34.5291 31.9902 34.5698C31.9902 34.8987 32.2569 35.1654 32.5857 35.1654H33.1023C33.4312 35.1654 33.6978 34.8987 33.6978 34.5698C33.6978 34.5292 33.6937 34.4894 33.6859 34.451C33.9388 34.3828 34.1793 34.2846 34.4035 34.1605C34.4233 34.1889 34.4454 34.2163 34.4708 34.2417C34.7033 34.4742 35.0804 34.4742 35.313 34.2417L35.6782 33.8764C35.9108 33.6438 35.9108 33.2667 35.6782 33.0342C35.6592 33.0151 35.6388 32.9982 35.618 32.9823C35.7601 32.743 35.8723 32.484 35.9491 32.21C35.9793 32.2148 36.0101 32.218 36.0416 32.218C36.3705 32.218 36.6371 31.9513 36.6371 31.6224V31.1058C36.6372 30.7769 36.3706 30.5103 36.0417 30.5103ZM32.8441 32.455C32.227 32.455 31.7267 31.9547 31.7267 31.3375C31.7267 30.7204 32.227 30.2201 32.8441 30.2201C33.4612 30.2201 33.9614 30.7204 33.9614 31.3375C33.9614 31.9547 33.4612 32.455 32.8441 32.455Z"
          fill="var(--p-primary-color)" />
          </svg>`
  },
  {
    name: 'Sensors',
    svg: `<svg width="45" height="45" viewBox="0 0 50 51" fill="none" xmlns="http://www.w3.org/2000/svg">
         <circle opacity="0.07" cx="25" cy="25.5" r="25" fill="var(--p-surface-300)" />
         <path
        d="M19.3499 20.3498L17.9299 18.9298C19.8052 17.0551 22.3483 16.002 24.9999 16.002C27.6515 16.002 30.1946 17.0551 32.0699 18.9298L30.6499 20.3498C29.1502 18.8537 27.1183 18.0135 24.9999 18.0135C22.8816 18.0135 20.8497 18.8537 19.3499 20.3498Z"
        fill="var(--p-primary-color)" />
        <path
        d="M22.17 23.1686L20.76 21.7586C21.885 20.635 23.41 20.0039 25 20.0039C26.59 20.0039 28.115 20.635 29.24 21.7586L27.82 23.1786C27.0733 22.4275 26.0592 22.0031 25 21.9986C24.4746 21.9982 23.9542 22.1013 23.4686 22.3021C22.983 22.5028 22.5418 22.7973 22.17 23.1686Z"
        fill="var(--p-primary-color)" />
        <path fill-rule="evenodd" clip-rule="evenodd"
        d="M31 24.998H27C27 25.5285 26.7893 26.0372 26.4142 26.4122C26.0391 26.7873 25.5304 26.998 25 26.998C24.4696 26.998 23.9609 26.7873 23.5858 26.4122C23.2107 26.0372 23 25.5285 23 24.998H19C18.4696 24.998 17.9609 25.2087 17.5858 25.5838C17.2107 25.9589 17 26.4676 17 26.998V35.998H33V26.998C33 26.4676 32.7893 25.9589 32.4142 25.5838C32.0391 25.2087 31.5304 24.998 31 24.998ZM19 31.998V28.998H31V31.998H19Z"
        fill="var(--p-primary-color)" />
        <path
        d="M26 24.998C26 25.5503 25.5523 25.998 25 25.998C24.4477 25.998 24 25.5503 24 24.998C24 24.4457 24.4477 23.998 25 23.998C25.5523 23.998 26 24.4457 26 24.998Z"
        fill="var(--p-primary-color)" />
        </svg>`
  },
  {
    name: 'Flags',
    svg: `<svg width="45" height="45" viewBox="0 0 50 51" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle opacity="0.07" cx="25" cy="25.5" r="25" fill="var(--p-surface-300)" />
          <path
          d="M18.5679 16C18.9532 16 19.2656 16.3124 19.2656 16.6977V18.4186L20.8662 18.0985C22.4016 17.7914 23.9931 17.9375 25.4469 18.519L25.8314 18.6728C27.1568 19.203 28.6156 19.302 30.0006 18.9558C30.5875 18.809 31.0589 19.4452 30.7476 19.964L29.5583 21.9462C29.2407 22.4757 29.0818 22.7404 29.0441 23.0284C29.0285 23.1485 29.0285 23.2701 29.0441 23.3902C29.0818 23.6782 29.2407 23.9429 29.5583 24.4724L31.0101 26.892C31.2992 27.3739 31.0407 27.9981 30.4954 28.1344L30.4023 28.1577C28.7562 28.5692 27.0223 28.4515 25.4469 27.8214C23.9931 27.2398 22.4016 27.0938 20.8662 27.4008L19.2656 27.7209V35.3023C19.2656 35.6876 18.9532 36 18.5679 36C18.1826 36 17.8702 35.6876 17.8702 35.3023V16.6977C17.8702 16.3124 18.1826 16 18.5679 16Z"
          fill="var(--p-primary-color)" />
          </svg>`
  },
  {
    name: 'Events',
    svg: `<svg width="45" height="45" viewBox="0 0 50 51" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle opacity="0.07" cx="25" cy="25.5" r="25" fill="var(--p-surface-300)" />
          <path
          d="M33.7083 23.5H16.625C16.2917 23.5 16 23.7917 16 24.125V34.3329C16 35.2495 16.75 35.9995 17.6667 35.9995H32.6667C33.5833 35.9995 34.3333 35.2495 34.3333 34.3329V24.125C34.3333 23.7917 34.0417 23.5 33.7083 23.5ZM22.25 32.6663C22.25 32.9163 22.0833 33.0829 21.8333 33.0829H20.1667C19.9167 33.0829 19.75 32.9163 19.75 32.6663V30.9997C19.75 30.7497 19.9167 30.583 20.1667 30.583H21.8333C22.0833 30.583 22.25 30.7497 22.25 30.9997V32.6663ZM22.25 28.4998C22.25 28.7498 22.0833 28.9164 21.8333 28.9164H20.1667C19.9167 28.9164 19.75 28.7498 19.75 28.4998V26.8332C19.75 26.5832 19.9167 26.4165 20.1667 26.4165H21.8333C22.0833 26.4165 22.25 26.5832 22.25 26.8332V28.4998ZM26.4167 32.6663C26.4167 32.9163 26.25 33.0829 26 33.0829H24.3333C24.0833 33.0829 23.9167 32.9163 23.9167 32.6663V30.9997C23.9167 30.7497 24.0833 30.583 24.3333 30.583H26C26.25 30.583 26.4167 30.7497 26.4167 30.9997V32.6663ZM26.4167 28.4998C26.4167 28.7498 26.25 28.9164 26 28.9164H24.3333C24.0833 28.9164 23.9167 28.7498 23.9167 28.4998V26.8332C23.9167 26.5832 24.0833 26.4165 24.3333 26.4165H26C26.25 26.4165 26.4167 26.5832 26.4167 26.8332V28.4998ZM30.5833 32.6663C30.5833 32.9163 30.4167 33.0829 30.1667 33.0829H28.5C28.25 33.0829 28.0833 32.9163 28.0833 32.6663V30.9997C28.0833 30.7497 28.25 30.583 28.5 30.583H30.1667C30.4167 30.583 30.5833 30.7497 30.5833 30.9997V32.6663ZM30.5833 28.4998C30.5833 28.7498 30.4167 28.9164 30.1667 28.9164H28.5C28.25 28.9164 28.0833 28.7498 28.0833 28.4998V26.8332C28.0833 26.5832 28.25 26.4165 28.5 26.4165H30.1667C30.4167 26.4165 30.5833 26.5832 30.5833 26.8332V28.4998Z"
          fill="var(--p-primary-color)" />
          <path
          d="M32.6667 18.0832H31H30.5833V17.2499C30.5833 16.5833 30.0417 16 29.3333 16C28.6667 16 28.0833 16.5416 28.0833 17.2499V18.0832H22.25V17.2499C22.25 16.5833 21.7083 16 21 16C20.3333 16 19.75 16.5416 19.75 17.2499V18.0832H19.3333H17.6667C16.75 18.0832 16 18.8332 16 19.7498V20.7915C16 21.1248 16.2917 21.4164 16.625 21.4164H33.7083C34.0417 21.4164 34.3333 21.1248 34.3333 20.7915V19.7498C34.3333 18.8332 33.5833 18.0832 32.6667 18.0832Z"
          fill="var(--p-primary-color)" />
          </svg>`
  },
  {
    name: 'Notifications',
    svg: `<svg width="45" height="45" viewBox="0 0 50 51" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle opacity="0.07" cx="25" cy="25.5" r="25" fill="var(--p-surface-300)" />
  <rect x="18" y="14" width="14" height="23" rx="2" ry="2" fill="var(--p-primary-color)" />
  <rect x="19.5" y="16.5" width="11" height="16" rx="1" ry="1" fill="white" opacity="0.9" />
  <circle cx="25" cy="35" r="1.5" fill="white" opacity="0.7" />
  <path d="M34 20C36.5 22.5 36.5 27.5 34 30" stroke="var(--p-primary-color)" stroke-width="2" fill="none" stroke-linecap="round" />
  <path d="M37 17C40.5 20.5 40.5 29.5 37 33" stroke="var(--p-primary-color)" stroke-width="2" fill="none" stroke-linecap="round" opacity="0.7" />
  <path d="M40 14C44.5 18.5 44.5 31.5 40 36" stroke="var(--p-primary-color)" stroke-width="2" fill="none" stroke-linecap="round" opacity="0.5" />
</svg>`
  },
  ]
  activeCardIndex: number = 0;

  /**
      * @property {Observable<boolean>} isMobile$ - Stores the application view mode status indicating whether it's accessed on a mobile device or web.
      */
  isMobile$!: Observable<boolean>;

  /**
   * @property {boolean} mobileSidebarVisible - Determines whether the sidebar is visible on mobile devices.
    */
  mobileSidebarVisible = false;

  constructor(public sanitizer: DomSanitizer, private router: Router,
    private responsive: ResponsiveService
  ) { }

  /**
   * Lifecycle hook that is called after Angular has initialized the component.
   * Fetches the list of applications from the backend.
   * @returns {void} - returns nothing i.e(void)
   */
  ngOnInit(): void {
    this.isMobile$ = this.responsive.isMobile$()
  }

  change(id: number) {
    const routes: any = {
      0: 'entity',
      1: 'instance',
      2: 'attribute',
      4: 'flags',
      5: 'events',
      6: 'notifications',
    };

    if (id in routes) {
      this.router.navigateByUrl(`/datapointAdmin/home/${routes[id]}`);
    }

    this.activeCardIndex = id;
  }

  getCardClass(idx: number): string {
    return `w-[220px]${this.activeCardIndex === idx ? ' border-b-4 border-b-[var(--p-primary-color)]' : ''}`;
  }

  toggleMobileSidebar() {
    this.mobileSidebarVisible = !this.mobileSidebarVisible;
  }

}
