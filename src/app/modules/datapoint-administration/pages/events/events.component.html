<div class="pt-[50px] pl-[20px] pr-[20px] w-full">
    <div class="pt-[10px]">
        <p-card class="w-full">
            <p-table #dt [value]="events" dataKey="eventId" [rowHover]="true" [rows]="10" [showCurrentPageReport]="true"
                [rowsPerPageOptions]="[10, 20, 30]" selectionMode="single" [paginator]="true"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [filterDelay]="0"
                [globalFilterFields]="['eventName', 'eventDesc', 'eventLevel', 'status']" (onRowSelect)="onEventSelect($event)" (onRowUnselect)="onEventUnSelect($event)">
                <ng-template pTemplate="caption">
                    <div class="flex justify-between">
                        <p-button [outlined]="true" icon="pi pi-filter-slash" label="Clear" (onClick)="clear(dt)" />
                        <div class="flex gap-[10px] items-center">
                            <p-iconField iconPosition="left">
                                <p-inputIcon>
                                    <i class="pi pi-search"></i>
                                </p-inputIcon>
                                <input pInputText type="text" (keyup)="applyFilterGlobal($event, 'contains')"
                                    [(ngModel)]="searchValue" placeholder="Keyboard Search" />
                            </p-iconField>
                            <p-button label="Create Event"
                                [style]="{'border-radius':'12px','height':'37px','border':'none'}"
                                (onClick)="createEvent()" />
                        </div>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="eventName" style="min-width: 14rem"
                            class="border-round-left-2xl text-left">
                            <div class="flex justify-between items-center">
                                Name
                                <p-sortIcon field="eventName" />
                                <p-columnFilter type="text" field="eventName" display="menu" class="ml-auto" />
                            </div>
                        </th>
                        <th pSortableColumn="eventDesc" style="min-width: 14rem">
                            <div class="flex justify-between items-center">
                                Description
                                <p-sortIcon field="eventDesc" />
                                <p-columnFilter type="text" field="eventDesc" display="menu" class="ml-auto" />
                            </div>
                        </th>

                        <th style="min-width: 10rem" class="border-round-right-2xl text-left">
                            Action
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-event>
                    <tr class="p-selectable-row" [pSelectableRow]="event">
                        <td class="border-round-left-2xl cursor-pointer text-left">
                            {{ event.eventName }}
                        </td>
                        <td class="text-left cursor-pointer" >
                            <span class="ml-1 vertical-align-middle desc">{{ event.eventDescription }}</span>
                        </td>

                        <td class="text-left cursor-pointer">
                            {{event.eventLevel}}
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="8">No events found.</td>
                    </tr>
                </ng-template>
            </p-table>
        </p-card>
    </div>
    <div class="pt-[10px]">
        @if(isShowEventDetails){
        <p-selectbutton [options]="eventActions" [(ngModel)]="selectedEventAction" [allowEmpty]="false" />
        <div class="pt-[10px] pb-[30px]">
            <p-card class=" w-full">
                @switch (selectedEventAction) {
                @case ('Event Details') {
                <app-manage-flag [flagId]="selectedEvent"></app-manage-flag>
                }
                @case ('Event Mappings') {
                <app-event-mapping [flagData]="selectedEvent" [app]="app" [org]="org"></app-event-mapping>
                }
                }
            </p-card>
        </div>
        }
    </div>
</div>
<p-toast [breakpoints]="breakPointForToastComponent"></p-toast>