<div class="pt-[50px] pl-[20px] pr-[20px] w-full">
    <div class="pt-[10px]">
        <p-card class="w-full">
            <p-table #dt [value]="notifications" dataKey="id" [rowHover]="true" [rows]="10"
                [showCurrentPageReport]="true" [rowsPerPageOptions]="[10, 20, 30]" [paginator]="true"
                selectionMode="single" [(selection)]="selectedNotif" dataKey="notificationId"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [filterDelay]="0"
                [globalFilterFields]="['notificationName', 'notificationDesc', 'notificationLevel', 'status']"
                (onRowSelect)="onNotifSelect($event)" (onRowUnselect)="onNotifUnSelect($event)">
                <ng-template pTemplate="caption">
                    <div class="flex justify-between">
                        <p-button [outlined]="true" icon="pi pi-filter-slash" label="Clear" (onClick)="clear(dt)" />
                        <div class="flex gap-[10px] items-center">
                            <p-iconField iconPosition="left">
                                <p-inputIcon>
                                    <i class="pi pi-search"></i>
                                </p-inputIcon>
                                <input pInputText type="text" (keyup)="applyFilterGlobal($event, 'contains')"
                                    [(ngModel)]="searchValue" placeholder="Keyboard Search" />
                            </p-iconField>
                            <p-button label="Create Notification"
                                [style]="{'border-radius':'12px','height':'37px','border':'none'}"
                                (onClick)="createNotification()" />
                        </div>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="notificationName" style="min-width: 14rem"
                            class="border-round-left-2xl text-left">
                            <div class="flex justify-between items-center">
                                Notification Name
                                <p-sortIcon field="notificationName" />
                                <p-columnFilter type="text" field="notificationName" display="menu" class="ml-auto" />
                            </div>
                        </th>
                        <th pSortableColumn="notificationDesc" style="min-width: 14rem">
                            <div class="flex justify-between items-center">
                                Notification Description
                                <p-sortIcon field="notificationDesc" />
                                <p-columnFilter type="text" field="notificationDesc" display="menu" class="ml-auto" />
                            </div>
                        </th>
                        <th pSortableColumn="notificationDesc" style="min-width: 14rem">
                            <div class="flex justify-between items-center">
                                Notification Type
                                <p-sortIcon field="notificationType" />
                                <p-columnFilter type="text" field="notificationType" display="menu" class="ml-auto" />
                            </div>
                        </th>
                        <th style="width: 5rem">
                            <div class="flex justify-between items-center">
                                Action
                            </div>
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-notification>
                    <tr class="p-selectable-row" [pSelectableRow]="notification">
                        <td class="border-round-left-2xl cursor-pointer text-left">
                            {{ notification.notificationName }}
                        </td>
                        <td class="text-left cursor-pointer">
                            <span class="ml-1 vertical-align-middle desc">{{ notification.notificationDescription
                                }}</span>
                        </td>
                        <td class="text-left cursor-pointer">
                            <span class="ml-1 vertical-align-middle desc">{{ notification.notificationType }}</span>
                        </td>
                        <td>
                            <p-button icon="pi pi-trash" severity="danger" [rounded]="true" [outlined]="true"
                                (click)="deleteNotification(notification.notificationId)" />
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="8">No Notifications found.</td>
                    </tr>
                </ng-template>
            </p-table>
        </p-card>
    </div>

    <div class="pt-[10px]">
        @if(isShowDetails){
        <p-selectbutton [options]="notifActions" [(ngModel)]="selectedNotifAction" [allowEmpty]="false" />
        <div class="pt-[10px] pb-[30px]">
            <p-card class=" w-full">
                @switch (selectedNotifAction) {
                @case ('Notification Details') {
                <app-manage-notification [notificationId]="selectedNotif.notificationId"></app-manage-notification>
                }
                @case ('Notification Mapping') {
                <app-notif-mapping [flagData]="selectedNotif" [app]="app" [org]="org"></app-notif-mapping>
                }
                }
            </p-card>
        </div>
        }
    </div>
</div>
 <p-toast [breakpoints]="breakPointForToastComponent"></p-toast>