<div class="pt-[50px] flex gap-[25px] pl-[20px] pr-[20px]">
    <div class="flex max-lg:flex-col max-lg:gap-[20px] lg:justify-between lg:items-center w-full">
        <p-selectbutton [options]="tabActions" [(ngModel)]="selectedTab" (onOptionClick)="onTabClick()"
            [allowEmpty]="false" [size]="(isMobile$|async)==true ? 'small' : 'large'" styleClass="text-center " />
            @if((isMobile$ |async)== false){
        <p-button class="max-lg:text-end" (onClick)="openPageBuilder()" label="Create New Page"></p-button>
            }
    </div>
</div>
@if(selectedTab === 'Page Manager'){
<div class="pt-[20px] md:pt-[50px] flex gap-[25px] pl-[20px] pr-[20px] w-full">
    <p-card class="w-full">
        <div class="card">
            <p-table class="customizePaginator"  #dt [value]="pages" selectionMode="single" [(selection)]="selectedPage" dataKey="_id"
                [rowHover]="true" [rows]="10" [showCurrentPageReport]="(isMobile$|async)==true? false:true" [rowsPerPageOptions]="[10, 25, 50]"
                [loading]="loading" [paginator]="true"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [filterDelay]="0"
                (onRowSelect)="onPageSelect($event)" (onRowUnselect)="onPageUnSelect($event)"
                [globalFilterFields]="['name', 'country.name', 'representative.name', 'status']">
                <ng-template #caption>
                    @if((isMobile$|async)==true){
                        <div class="flex flex-col gap-[20px]">
                            <div class="flex items-center justify-between">
                                Report Adminstration
                                <p-button [outlined]="true" icon="pi pi-filter-slash" (click)="clear(dt)" />
                            </div>
                            <div class="flex gap-[10px] w-full">
                             
                                <p-iconField iconPosition="left" class="w-full">
                                    <p-inputIcon class="w-full">
                                        <i class="pi pi-search"></i>
                                    </p-inputIcon>
                                    <input pInputText type="text" [(ngModel)]="searchValue" placeholder="Search" class="w-full"/>
                                </p-iconField>
                            </div>
    
                        </div>
                    }
                    @else{
                        <div class="flex justify-between">
                            <div>
                                Report Adminstration
                            </div>
                            <div class="flex gap-[10px]">
                                <p-button [outlined]="true" icon="pi pi-filter-slash" (click)="clear(dt)" />
                                <p-iconField iconPosition="left">
                                    <p-inputIcon>
                                        <i class="pi pi-search"></i>
                                    </p-inputIcon>
                                    <input pInputText type="text" [(ngModel)]="searchValue" placeholder="Search" />
                                </p-iconField>
                            </div>
    
                        </div>
                    }
                    
                </ng-template>
                <ng-template #header>
                    <tr>
                        <th pSortableColumn="templateName" style="min-width: 14rem">
                            <div class="flex justify-between items-center">
                                Page Name
                                <p-sortIcon field="templateName" />
                                <!-- <p-columnFilter type="text" field="name" display="menu" class="ml-auto" /> -->
                            </div>
                        </th>
                        <th pSortableColumn="templateDescription" style="min-width: 14rem">
                            <div class="flex justify-between items-center">
                                Description
                                <p-sortIcon field="templateDescription" />
                                <!-- <p-columnFilter type="text" field="country.name" display="menu" class="ml-auto" /> -->
                            </div>
                        </th>

                        <th pSortableColumn="isVisible" style="min-width: 14rem">
                            <div class="flex justify-between items-center">
                                Visible
                                <p-sortIcon field="isVisible" />
                                <!-- <p-columnFilter type="text" field="country.name" display="menu" class="ml-auto" /> -->
                            </div>
                        </th>

                        <th pSortableColumn="createdOn" style="min-width: 10rem">
                            <div class="flex justify-between items-center">
                                Date
                                <p-sortIcon field="createdOn" />
                                <!-- <p-columnFilter type="date" field="date" display="menu" class="ml-auto" /> -->
                            </div>
                        </th>
                        <th style="width: 5rem">
                            <div class="flex justify-between items-center">
                                Action
                                <p-sortIcon field="date" />
                                <!-- <p-columnFilter type="date" field="date" display="menu" class="ml-auto" /> -->
                            </div>
                        </th>
                    </tr>
                </ng-template>
                <ng-template #body let-page>
                    <tr [pSelectableRow]="page">
                        <td>
                            {{ page.templateName }}
                        </td>
                        <td>
                            {{ page.templateDesc }}
                        </td>
                        <td>
                            <p-checkbox [(ngModel)]="page.visble" [binary]="true" />
                        </td>
                        <td>
                            {{ page.createdOn | date: 'MM/dd/yyyy' }}
                        </td>
                        <td class="flex gap-[5px]">
                            <p-button icon="pi pi-copy" severity="danger" [rounded]="true" [outlined]="true"
                                (click)="copyPage(page)" />
                            <p-button icon="pi pi-pencil" [rounded]="true" [outlined]="true" (click)="editPage(page)" />
                            <p-button icon="pi pi-trash" severity="danger" [rounded]="true" [outlined]="true"
                                (click)="deletePage(page)" />
                        </td>
                    </tr>
                </ng-template>
                <ng-template #emptymessage>
                    <tr>
                        <td colspan="8">No Pages found.</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </p-card>
</div>

@if(showDetails){
<div pAnimateOnScroll enterClass="animate-enter fade-in-10 slide-in-from-b-20 animate-duration-1000"
    class="pt-[50px] flex gap-[25px] pl-[20px] pr-[20px] w-full">
    <p-card class="w-full">
        <div class="card">
            <p-table #dt [value]="reportDetails" selectionMode="single" [(selection)]="selectedPage"
                dataKey="templateName" [rowHover]="true" [loading]="loading">
                <ng-template #caption>
                    <div class="flex justify-between">
                        <div>
                            Report Details
                        </div>
                    </div>
                </ng-template>
                <ng-template #header>
                    <tr>
                        <th style="min-width: 14rem">
                            <div class="flex justify-between items-center">
                                Page Name
                            </div>
                        </th>
                        <th style="min-width: 14rem">
                            <div class="flex justify-between items-center">
                                Description
                            </div>
                        </th>

                        <th style="min-width: 14rem">
                            <div class="flex justify-between items-center">
                                Classification
                            </div>
                        </th>

                        <th style="min-width: 5rem">
                            <div class="flex justify-between items-center">
                                Visible
                            </div>
                        </th>
                        <th style="width: 5rem">
                            <div class="flex justify-between items-center">
                                Shareable
                            </div>
                        </th>
                        <th style="width: 10rem">
                            <div class="flex justify-between items-center">
                                Allow Print

                            </div>
                        </th>
                        <th style="width: 14rem">
                            <div class="flex justify-between items-center">
                                Allow Copy Content
                            </div>
                        </th>
                        <th style="width: 14rem">
                            <div class="flex justify-between items-center">
                                Allow Edit Content
                            </div>
                        </th>
                    </tr>
                </ng-template>
                <ng-template #body let-page>
                    <tr [pSelectableRow]="page">
                        <td class="text-center">
                            {{ page.templateName }}
                        </td>
                        <td>
                            {{ page.templateDesc }}
                        </td>
                        <td>
                            <p-select [options]="classifications" appendTo="body" [(ngModel)]="page.confidentialType"
                                placeholder="Choose Classification" class="w-full md:w-56" />
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.visible" [binary]="true" />
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.sharable" [binary]="true" />
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.isVisible" [binary]="true" />
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.allowCopyContent" [binary]="true" />
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.allowCopyContent" [binary]="true" />
                        </td>

                    </tr>
                </ng-template>
                <ng-template #emptymessage>
                    <tr>
                        <td colspan="8">No Pages found.</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </p-card>
</div>

<div pAnimateOnScroll enterClass="animate-enter fade-in-10 slide-in-from-b-20 animate-duration-1000"
    class="pt-[50px] flex gap-[25px] pl-[20px] pr-[20px] w-full">
    <p-card class="w-full">
        <div class="card">
            <p-table #dt [value]="reportVersions" selectionMode="single" [(selection)]="selectedPage"
                dataKey="templateName" [rowHover]="true" [rows]="10" [showCurrentPageReport]="true"
                [rowsPerPageOptions]="[10, 25, 50]" [loading]="loading" [paginator]="true"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [filterDelay]="0"
                [globalFilterFields]="['name', 'country.name', 'representative.name', 'status']">
                <ng-template #caption>
                    <div class="flex justify-between">
                        <div>
                            Page Versions
                        </div>
                        <div class="flex gap-[10px]">
                            <p-button [outlined]="true" icon="pi pi-filter-slash" (click)="clear(dt)" />
                            <p-iconField iconPosition="left">
                                <p-inputIcon>
                                    <i class="pi pi-search"></i>
                                </p-inputIcon>
                                <input pInputText type="text" [(ngModel)]="searchValue" placeholder="Search" />
                            </p-iconField>
                        </div>
                    </div>
                </ng-template>
                <ng-template #header>
                    <tr>
                        <th style="min-width: 5rem">
                            <div class="flex justify-between items-center">
                                Page Id
                            </div>
                        </th>
                        <th style="min-width: 14rem">
                            <div class="flex justify-between items-center">
                                Page Name
                            </div>
                        </th>
                        <th style="min-width: 14rem">
                            <div class="flex justify-between items-center">
                                Description
                            </div>
                        </th>
                        <th style="min-width: 5rem">
                            <div class="flex justify-between items-center">
                                Modified By
                            </div>
                        </th>
                        <th style="min-width: 5rem">
                            <div class="flex justify-between items-center">
                                Created On
                            </div>
                        </th>

                        <th style="min-width: 5rem">
                            <div class="flex justify-between items-center">
                                Classification
                            </div>
                        </th>
                        <th style="width: 5rem">
                            <div class="flex justify-between items-center">
                                Active
                            </div>
                        </th>
                        <th style="min-width: 5rem">
                            <div class="flex justify-between items-center">
                                Shareable
                            </div>
                        </th>
                        <th style="width: 5rem">
                            <div class="flex justify-between items-center">
                                Published
                            </div>
                        </th>
                        <th style="width: 14rem">
                            <div class="flex justify-between items-center">
                                Allow Print
                            </div>
                        </th>
                        <th style="width: 14rem">
                            <div class="flex justify-between items-center">
                                Allow copy content
                            </div>
                        </th>
                        <th style="width: 14rem">
                            <div class="flex justify-between items-center">
                                Allow edit content
                            </div>
                        </th>
                        <th style="width: 14rem">
                            <div class="flex justify-between items-center">
                                Allow save content
                            </div>
                        </th>
                    </tr>
                </ng-template>
                <ng-template #body let-page>
                    <tr [pSelectableRow]="page">
                        <td>
                            {{ page.templateName }}
                        </td>
                        <td>
                            {{ page.templateDesc }}
                        </td>
                        <td>
                            {{ page.templateDesc }}
                        </td>
                        <td>
                            {{ page.modifiedBy }}
                        </td>

                        <td>
                            {{ page.createdOn | date: 'MM/dd/yyyy' }}
                        </td>
                        <td>
                            {{ page.classification }}
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.isActive" [binary]="true" />
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.shareable" [binary]="true" />
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.published" [binary]="true" />
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.allowPrint" [binary]="true" />
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.allowCopyContent" [binary]="true" />
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.allowEditContent" [binary]="true" />
                        </td>
                        <td class="!text-center">
                            <p-checkbox [(ngModel)]="page.allowSave" [binary]="true" />
                        </td>
                    </tr>
                </ng-template>
                <ng-template #emptymessage>
                    <tr>
                        <td colspan="8">No Pages versions found.</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </p-card>
</div>
}
}
@else if(selectedTab === 'Role Page Assignment'){
<app-page-assignement [app]="app"></app-page-assignement>
}
@else if(selectedTab === 'Page Assignment'){
<app-role-assignement></app-role-assignement>
}

<p-toast [breakpoints]="breakPointForToastComponent"></p-toast>